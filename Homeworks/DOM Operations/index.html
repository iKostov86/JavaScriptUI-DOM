<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DOM Operations</title>
    <style>
        html, body, div {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        #root {
            box-sizing: border-box;
            background: gray;
            border: 5px solid black;
        }

        /*#the-canvas {*/
            /*background: gray;*/
            /*width: 100%;*/
            /*height: 100%;*/
        /*}*/
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
        var constants = {};

        function createDivs(count) {
            var root = document.getElementById('root'),
                strong = document.createElement('strong');

            strong.innerHTML = 'div';

            for (var i = 0; i < count; i += 1) {
                var div = document.createElement('div');

                div.style.width = getRandomNumber(20, 100) + 'px';
                div.style.height = getRandomNumber(20, 100) + 'px';
                div.style.background = getRandomColor();
                div.style.border = getRandomNumber(1, 20) + 'px solid ' + getRandomColor();
                div.style.borderRadius = getRandomNumber(1, 25) + 'px';
                div.style.fontcolor = getRandomColor();
                div.style.position = 'absolute';
                div.style.left = getRandomNumber(5, window.innerWidth - div.getAttribute('width') - div.getAttribute('borderWidth')) + 'px';
                div.style.top = getRandomNumber(5, window.innerHeight - div.getAttribute('height') - div.getAttribute('borderWidth')) + 'px';
                div.appendChild(strong.cloneNode(true));

                root.appendChild(div);
            }
        }

        function movesDivs(count) {
//            var root = document.getElementById('root'),
//                canvas = document.createElement('canvas'),
//                ctx = canvas.getContext('2d');
//
//            canvas.id = 'the-canvas';
//            canvas.width = root.clientWidth;
//            canvas.height = root.clientHeight;
//
//            ctx.beginPath();
//            ctx.arc(canvas.width / 2, canvas.height / 2, 100, 0, 2 * Math.PI);
////            ctx.stroke();
//
//            root.appendChild(canvas);

            var div = document.createElement('div'),
                angle = 0;

            div.style.width = '75px';
            div.style.height = '75px';
            div.style.background = getRandomColor();
            div.style.border = '5px solid black';
            div.style.position = 'absolute';
            div.className = 'moved';

            function animation() {
                var docFrag = document.createDocumentFragment();

                var rootChild = document.getElementsByClassName('moved');

                while (rootChild.length) {
                    root.removeChild(rootChild[0]);
                }

                for (var i = 0; i < count; i += 1) {
                    div.style.left = document.body.clientWidth / 2 + 350 * Math.cos(angle + 2 * Math.PI / count * i) + 'px';
                    div.style.top = document.body.clientHeight / 2 + 350 * Math.sin(angle + 2 * Math.PI / count * i) + 'px';

                    docFrag.appendChild(div.cloneNode(true));
                }

                root.appendChild(docFrag);

                angle += 0.1;

                if (angle > 2 * Math.PI) {
                    angle = 0;
                }

                setTimeout(animation, getRandomNumber(25, 125));
                //requestAnimationFrame(animation);
            }

            function changeBackground() {
                div.style.background = getRandomColor();

                setTimeout(changeBackground, getRandomNumber(500, 1500));
            }

            animation();
            changeBackground();
        }

        function getRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }

        function getRandomColor() {
            const COLOR_STRING_LENGTH = 6;
            const HEXADECIMAL_BASE = 16;
            const HEXADECIMAL_SIGNS = '0123456789ABCDEF';

            var letters = HEXADECIMAL_SIGNS.split('');
            var color = '#';
            for (var i = 0; i < COLOR_STRING_LENGTH; i += 1) {
                color += letters[Math.floor(Math.random() * HEXADECIMAL_BASE)];
            }
            return color;
        }

        //createDivs(5);
        movesDivs(20);
    </script>
</body>
</html>